{% extends 'visual/base_tailwind.html' %}
{% load projeto_tags %}
{% block title %}{{ projeto.nome }}{% endblock %}
{% block content %}
<div class="ml-56 p-8 max-w-3xl">
    <div class="bg-white rounded-lg shadow p-8 border border-blue-100">
        <div class="flex items-center gap-2 mb-2">
            <span class="text-xs px-2 py-1 rounded bg-gray-200 text-gray-700">{{ projeto.status|default:'-' }}</span>
            <span class="text-xs px-2 py-1 rounded bg-blue-100 text-blue-700">{{ projeto.criado_em|date:'d/m/Y' }}</span>
        </div>
        <h1 class="text-2xl font-bold mb-2">{{ projeto.nome }}</h1>
        <div class="flex flex-wrap gap-1 mb-4">
            {% for tec in projeto.tecnologias|split_tec %}
                <span class="bg-blue-100 text-blue-700 px-2 py-0.5 rounded text-xs">{{ tec }}</span>
            {% endfor %}
        </div>
        <div class="mb-4 text-gray-700">{{ projeto.descricao }}</div>
        <div class="mb-4 text-gray-700"><strong>Anotações:</strong> {{ projeto.anotacoes|default:'-' }}</div>
        <div class="mb-4">
            <div class="flex justify-between text-xs text-gray-500 mb-1">
                <span>Progresso</span>
                <span>{{ projeto.progresso }}%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3">
                <div class="bg-gradient-to-r from-blue-500 to-green-400 h-3 rounded-full transition-all duration-300" style="width: {{ projeto.progresso }}%;"></div>
            </div>
        </div>
        <div class="mb-4 text-gray-700">
            <strong>Início:</strong> {{ projeto.data_inicio|date:'d/m/Y'|default:'-' }}
            <strong class="ml-4">Fim:</strong> {{ projeto.data_fim|date:'d/m/Y'|default:'-' }}
        </div>
        <div class="mb-4 flex flex-wrap gap-4 items-center">
            {% if projeto.link %}
                <a href="{{ projeto.link }}" target="_blank" class="flex items-center gap-1 text-blue-600 underline">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 010 5.656m-1.414-1.414a2 2 0 010-2.828m6.364-6.364a9 9 0 11-12.728 0 9 9 0 0112.728 0z" /></svg>
                    Site
                </a>
            {% endif %}
            {% if projeto.repo %}
                <a href="{{ projeto.repo }}" target="_blank" class="flex items-center gap-1 text-gray-800 underline">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 00-4 0M8 4.354V6a4 4 0 004 4h0a4 4 0 004-4V4.354m-8 0A4 4 0 004 8v8a4 4 0 004 4h8a4 4 0 004-4V8a4 4 0 00-4-4" /></svg>
                    Repositório
                </a>
            {% endif %}
            {% if projeto.demo %}
                <a href="{{ projeto.demo }}" target="_blank" class="flex items-center gap-1 text-green-700 underline">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-6.518-3.759A1 1 0 007 8.118v7.764a1 1 0 001.234.97l6.518-1.878A1 1 0 0016 13.882V10.12a1 1 0 00-1.248-.952z" /></svg>
                    Demonstração
                </a>
            {% endif %}
            {% if projeto.docs %}
                <a href="{{ projeto.docs }}" target="_blank" class="flex items-center gap-1 text-indigo-700 underline">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 20h9" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m0 0H3" /></svg>
                    Documentação
                </a>
            {% endif %}
        </div>

        <div class="flex gap-4 mt-6">
            <a href="{% url 'projetos:edit' projeto.pk %}" class="bg-yellow-400 text-gray-900 px-4 py-2 rounded hover:bg-yellow-500 transition">Editar</a>
            <a href="{% url 'projetos:delete' projeto.pk %}" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition">Excluir</a>
            <a href="{% url 'projetos:list' %}" class="text-blue-600 ml-auto">Voltar</a>
        </div>
    </div>

    <div class="bg-white rounded-lg shadow p-6 border border-blue-50 mt-8">
        <div class="flex items-center gap-2 mb-4">
            <h2 class="text-lg font-bold">Anotações rápidas</h2>
            <a href="{% url 'projetos:anotacao' projeto.pk %}" class="ml-auto bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 transition text-sm">+ Nova anotação</a>
        </div>
        {% if comentarios %}
            <ul class="space-y-4">
                {% for c in comentarios %}
                <li class="border-l-4 border-blue-400 pl-4 py-2 bg-blue-50 rounded">
                    <div class="flex items-center gap-2 text-xs text-gray-500 mb-1">
                        <span class="font-semibold">{{ c.user }}</span>
                        <span>{{ c.criado_em|date:'d/m/Y H:i' }}</span>
                    </div>
                    <div class="text-gray-800">{{ c.texto }}</div>
                </li>
                {% endfor %}
            </ul>
        {% else %}
            <div class="text-gray-400">Nenhuma anotação ainda.</div>
        {% endif %}
    </div>
</div>
{% endblock %}
